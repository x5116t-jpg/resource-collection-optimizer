<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1600" width="1400" height="1600">
  <!-- 定義 -->
  <defs>
    <!-- グラデーション -->
    <linearGradient id="systemGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f0f4f8;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d9e2ec;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="inputGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e3f2fd;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bbdefb;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="processGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#fff3e0;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#ffe0b2;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="dataGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f3e5f5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e1bee7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="outputGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e8f5e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c8e6c9;stop-opacity:1" />
    </linearGradient>

    <!-- 矢印マーカー -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#1976d2" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#388e3c" />
    </marker>
  </defs>

  <!-- 背景 -->
  <rect x="0" y="0" width="1400" height="1600" fill="#ffffff"/>

  <!-- タイトル -->
  <text x="700" y="40" font-family="Arial, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1a1a1a">
    資源回収ルート最適化システム - フロー図
  </text>

  <!-- システム境界ボックス -->
  <rect x="100" y="80" width="1200" height="1460" rx="10" ry="10"
        fill="url(#systemGradient)" stroke="#102a43" stroke-width="3" stroke-dasharray="10,5"/>
  <text x="700" y="110" font-family="Arial, sans-serif" font-size="20" font-weight="bold"
        text-anchor="middle" fill="#102a43">システム範囲</text>

  <!-- ========== 入力セクション ========== -->
  <text x="120" y="150" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#1565c0">
    📥 入力データ
  </text>

  <!-- 入力1: 道路ネットワーク -->
  <rect x="140" y="170" width="240" height="100" rx="5" ry="5"
        fill="url(#inputGradient)" stroke="#1976d2" stroke-width="2"/>
  <text x="260" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">
    道路ネットワークデータ
  </text>
  <text x="260" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • road_network_*.json
  </text>
  <text x="260" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • ノード（地点）情報
  </text>
  <text x="260" y="256" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • エッジ（道路）情報
  </text>

  <!-- 入力2: マスタデータ -->
  <rect x="420" y="170" width="240" height="100" rx="5" ry="5"
        fill="url(#inputGradient)" stroke="#1976d2" stroke-width="2"/>
  <text x="540" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">
    マスタデータ
  </text>
  <text x="540" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 資源種別（resources.json）
  </text>
  <text x="540" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 車種情報（vehicles.json）
  </text>
  <text x="540" y="256" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 適合性情報（compatibility.json）
  </text>

  <!-- 入力3: ユーザー選択 -->
  <rect x="700" y="170" width="240" height="100" rx="5" ry="5"
        fill="url(#inputGradient)" stroke="#1976d2" stroke-width="2"/>
  <text x="820" y="200" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#0d47a1">
    ユーザー選択情報
  </text>
  <text x="820" y="220" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 車庫地点
  </text>
  <text x="820" y="238" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 回収地点（資源種別・量）
  </text>
  <text x="820" y="256" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#1565c0">
    • 集積場所
  </text>

  <!-- ========== データ格納層 ========== -->
  <text x="120" y="320" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7b1fa2">
    💾 データ格納層
  </text>

  <!-- データ1: NetworkX グラフ -->
  <rect x="140" y="340" width="200" height="80" rx="5" ry="5"
        fill="url(#dataGradient)" stroke="#8e24aa" stroke-width="2"/>
  <text x="240" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#4a148c">
    NetworkX グラフ
  </text>
  <text x="240" y="383" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    ノード・エッジの
  </text>
  <text x="240" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    ネットワーク構造
  </text>

  <!-- データ2: 地点レジストリ -->
  <rect x="370" y="340" width="200" height="80" rx="5" ry="5"
        fill="url(#dataGradient)" stroke="#8e24aa" stroke-width="2"/>
  <text x="470" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#4a148c">
    地点レジストリ
  </text>
  <text x="470" y="383" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    車庫・回収地点・
  </text>
  <text x="470" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    集積場所の管理
  </text>

  <!-- データ3: 車種カタログ -->
  <rect x="600" y="340" width="200" height="80" rx="5" ry="5"
        fill="url(#dataGradient)" stroke="#8e24aa" stroke-width="2"/>
  <text x="700" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#4a148c">
    車種カタログ
  </text>
  <text x="700" y="383" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    容量・コスト・
  </text>
  <text x="700" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    エネルギー消費情報
  </text>

  <!-- データ4: 距離行列 -->
  <rect x="830" y="340" width="200" height="80" rx="5" ry="5"
        fill="url(#dataGradient)" stroke="#8e24aa" stroke-width="2"/>
  <text x="930" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#4a148c">
    距離行列
  </text>
  <text x="930" y="383" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    地点間の
  </text>
  <text x="930" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    最短距離情報
  </text>

  <!-- データ5: 空間インデックス -->
  <rect x="1060" y="340" width="200" height="80" rx="5" ry="5"
        fill="url(#dataGradient)" stroke="#8e24aa" stroke-width="2"/>
  <text x="1160" y="365" font-family="Arial, sans-serif" font-size="13" font-weight="bold" text-anchor="middle" fill="#4a148c">
    空間インデックス
  </text>
  <text x="1160" y="383" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    地点の高速
  </text>
  <text x="1160" y="400" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#6a1b9a">
    近傍検索用
  </text>

  <!-- ========== 処理フロー ========== -->
  <text x="120" y="460" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#f57c00">
    ⚙️ 処理フロー
  </text>

  <!-- 処理1: データ読込・初期化 -->
  <rect x="200" y="480" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="325" y="505" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    1. データ読込・初期化
  </text>
  <text x="325" y="525" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    ネットワーク・マスタ読込
  </text>
  <text x="325" y="543" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    グラフ構築、キャッシュ初期化
  </text>

  <!-- 処理2: 地点選択（UI） -->
  <rect x="500" y="480" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="625" y="505" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    2. 地点選択（UI）
  </text>
  <text x="625" y="525" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    地図クリックで地点選択
  </text>
  <text x="625" y="543" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    資源種別・回収量入力
  </text>

  <!-- 処理3: 車種割当プラン生成 -->
  <rect x="800" y="480" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="925" y="505" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    3. 車種割当プラン生成
  </text>
  <text x="925" y="525" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    資源と車種の適合性チェック
  </text>
  <text x="925" y="543" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    最適な車種を自動選択
  </text>

  <!-- 処理4: 距離行列計算 -->
  <rect x="200" y="610" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="325" y="635" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    4. 距離行列計算
  </text>
  <text x="325" y="655" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    地点間の最短経路計算
  </text>
  <text x="325" y="673" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    NetworkX shortest_path
  </text>

  <!-- 処理5: ルート最適化 -->
  <rect x="500" y="610" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="625" y="635" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    5. ルート最適化
  </text>
  <text x="625" y="655" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    VRP（配送計画問題）求解
  </text>
  <text x="625" y="673" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    総コスト最小化
  </text>

  <!-- 処理6: コスト計算 -->
  <rect x="800" y="610" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="925" y="635" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    6. コスト詳細計算
  </text>
  <text x="925" y="655" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    固定費・変動費算出
  </text>
  <text x="925" y="673" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    エネルギー消費量計算
  </text>

  <!-- 処理7: 経路再構成 -->
  <rect x="200" y="740" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="325" y="765" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    7. 経路再構成
  </text>
  <text x="325" y="785" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    最適ルートの詳細経路取得
  </text>
  <text x="325" y="803" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    地図表示用座標リスト作成
  </text>

  <!-- 処理8: 結果可視化 -->
  <rect x="500" y="740" width="250" height="80" rx="8" ry="8"
        fill="url(#processGradient)" stroke="#f57c00" stroke-width="2"/>
  <text x="625" y="765" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#e65100">
    8. 結果可視化
  </text>
  <text x="625" y="785" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    地図上にルート表示
  </text>
  <text x="625" y="803" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ef6c00">
    Folium + Streamlit
  </text>

  <!-- ========== 出力セクション ========== -->
  <text x="120" y="870" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#2e7d32">
    📤 出力結果
  </text>

  <!-- 出力1: ルート情報 -->
  <rect x="140" y="890" width="240" height="100" rx="5" ry="5"
        fill="url(#outputGradient)" stroke="#388e3c" stroke-width="2"/>
  <text x="260" y="920" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">
    最適ルート情報
  </text>
  <text x="260" y="940" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 訪問順序
  </text>
  <text x="260" y="958" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 総走行距離
  </text>
  <text x="260" y="976" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 使用車種
  </text>

  <!-- 出力2: コスト詳細 -->
  <rect x="420" y="890" width="240" height="100" rx="5" ry="5"
        fill="url(#outputGradient)" stroke="#388e3c" stroke-width="2"/>
  <text x="540" y="920" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">
    コスト詳細内訳
  </text>
  <text x="540" y="940" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 固定費（詳細項目別）
  </text>
  <text x="540" y="958" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 変動費（詳細項目別）
  </text>
  <text x="540" y="976" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 総コスト
  </text>

  <!-- 出力3: エネルギー情報 -->
  <rect x="700" y="890" width="240" height="100" rx="5" ry="5"
        fill="url(#outputGradient)" stroke="#388e3c" stroke-width="2"/>
  <text x="820" y="920" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">
    エネルギー消費量
  </text>
  <text x="820" y="940" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 総消費電力量 [kWh]
  </text>
  <text x="820" y="958" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 車両別消費量
  </text>
  <text x="820" y="976" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • CO2削減効果
  </text>

  <!-- 出力4: 地図可視化 -->
  <rect x="980" y="890" width="240" height="100" rx="5" ry="5"
        fill="url(#outputGradient)" stroke="#388e3c" stroke-width="2"/>
  <text x="1100" y="920" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#1b5e20">
    地図上の可視化
  </text>
  <text x="1100" y="940" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • インタラクティブ地図
  </text>
  <text x="1100" y="958" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • ルート経路表示
  </text>
  <text x="1100" y="976" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#2e7d32">
    • 地点マーカー
  </text>

  <!-- ========== 矢印（データフロー） ========== -->

  <!-- 入力 → データ格納層 -->
  <line x1="260" y1="270" x2="240" y2="340" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <line x1="540" y1="270" x2="470" y2="340" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)"/>
  <line x1="820" y1="270" x2="700" y2="340" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)"/>

  <!-- 入力 → 処理フロー -->
  <line x1="260" y1="270" x2="325" y2="480" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3"/>
  <line x1="540" y1="270" x2="625" y2="480" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3"/>
  <line x1="820" y1="270" x2="925" y2="480" stroke="#1976d2" stroke-width="2" marker-end="url(#arrowhead-blue)" stroke-dasharray="5,3"/>

  <!-- データ格納層 → 処理フロー -->
  <line x1="240" y1="420" x2="325" y2="480" stroke="#8e24aa" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="470" y1="420" x2="625" y2="480" stroke="#8e24aa" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="420" x2="925" y2="480" stroke="#8e24aa" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="930" y1="420" x2="325" y2="610" stroke="#8e24aa" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="1160" y1="420" x2="625" y2="480" stroke="#8e24aa" stroke-width="2" marker-end="url(#arrowhead)" stroke-dasharray="5,3"/>

  <!-- 処理フロー内の流れ -->
  <line x1="450" y1="520" x2="500" y2="520" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="520" x2="800" y2="520" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="925" y1="560" x2="325" y2="610" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="650" x2="500" y2="650" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="650" x2="800" y2="650" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="625" y1="690" x2="325" y2="740" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="450" y1="780" x2="500" y2="780" stroke="#f57c00" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- 処理フロー → 出力 -->
  <line x1="325" y1="820" x2="260" y2="890" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="625" y1="820" x2="540" y2="890" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="925" y1="690" x2="820" y2="890" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>
  <line x1="625" y1="820" x2="1100" y2="890" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead-green)"/>

  <!-- ========== 補足情報エリア ========== -->
  <rect x="120" y="1030" width="1160" height="490" rx="8" ry="8"
        fill="#fafafa" stroke="#666" stroke-width="2"/>

  <text x="700" y="1065" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">
    📌 システム詳細説明
  </text>

  <!-- 主要技術スタック -->
  <text x="150" y="1100" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#1976d2">
    🔧 主要技術スタック
  </text>
  <text x="170" y="1125" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • フレームワーク: Streamlit（Webアプリケーション）
  </text>
  <text x="170" y="1145" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • グラフ処理: NetworkX（道路ネットワーク解析）
  </text>
  <text x="170" y="1165" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 地図表示: Folium + streamlit-folium（インタラクティブ地図）
  </text>
  <text x="170" y="1185" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • データ処理: Pandas（テーブル編集・可視化）
  </text>

  <!-- データフロー説明 -->
  <text x="700" y="1100" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#7b1fa2">
    💾 データフロー
  </text>
  <text x="720" y="1125" font-family="Arial, sans-serif" font-size="12" fill="#333">
    1. JSONファイルから道路ネットワークとマスタデータを読込
  </text>
  <text x="720" y="1145" font-family="Arial, sans-serif" font-size="12" fill="#333">
    2. グラフ構造とキャッシュに変換・保存（高速化）
  </text>
  <text x="720" y="1165" font-family="Arial, sans-serif" font-size="12" fill="#333">
    3. ユーザー入力を受け取り、最適化処理を実行
  </text>
  <text x="720" y="1185" font-family="Arial, sans-serif" font-size="12" fill="#333">
    4. 結果を地図・表形式で出力
  </text>

  <!-- 最適化アルゴリズム -->
  <text x="150" y="1230" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#f57c00">
    ⚙️ 最適化アルゴリズム
  </text>
  <text x="170" y="1255" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 問題: VRP（Vehicle Routing Problem - 配送計画問題）
  </text>
  <text x="170" y="1275" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 目的: 総コスト（固定費 + 変動費）の最小化
  </text>
  <text x="170" y="1295" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 制約: 車両容量、資源適合性、地点訪問順序
  </text>
  <text x="170" y="1315" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 手法: 貪欲法ベースのヒューリスティック + 局所最適化
  </text>

  <!-- コスト計算式 -->
  <text x="700" y="1230" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#2e7d32">
    💰 コスト計算式
  </text>
  <text x="720" y="1255" font-family="Arial, sans-serif" font-size="12" fill="#333">
    総コスト = 固定費 + 変動費
  </text>
  <text x="720" y="1275" font-family="Arial, sans-serif" font-size="12" fill="#333">
    固定費 = Σ(年間固定費 ÷ 年間走行距離 × 走行距離)
  </text>
  <text x="720" y="1295" font-family="Arial, sans-serif" font-size="12" fill="#333">
    変動費 = Σ(距離単価 × 走行距離)
  </text>
  <text x="720" y="1315" font-family="Arial, sans-serif" font-size="12" fill="#333">
    エネルギー = Σ(消費原単位[kWh/km] × 走行距離)
  </text>

  <!-- システムの特徴 -->
  <text x="150" y="1360" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#d32f2f">
    ✨ システムの特徴
  </text>
  <text x="170" y="1385" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ 地図クリックで直感的に地点選択が可能
  </text>
  <text x="170" y="1405" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ 資源種別と車種の適合性を自動チェック
  </text>
  <text x="170" y="1425" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ 複数車両の同時最適化に対応
  </text>
  <text x="170" y="1445" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ 詳細なコスト内訳とエネルギー消費量を表示
  </text>
  <text x="170" y="1465" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ インタラクティブ地図でルートを可視化
  </text>
  <text x="170" y="1485" font-family="Arial, sans-serif" font-size="12" fill="#333">
    ✓ セッション状態を保持し、効率的な操作が可能
  </text>

  <!-- 想定ユーザー -->
  <text x="700" y="1360" font-family="Arial, sans-serif" font-size="15" font-weight="bold" fill="#455a64">
    👥 想定ユーザー
  </text>
  <text x="720" y="1385" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 自治体の資源回収担当者
  </text>
  <text x="720" y="1405" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 廃棄物処理業者の配送計画担当者
  </text>
  <text x="720" y="1425" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • 環境コンサルタント
  </text>
  <text x="720" y="1445" font-family="Arial, sans-serif" font-size="12" fill="#333">
    • ロジスティクス最適化の研究者
  </text>

  <!-- フッター -->
  <text x="700" y="1560" font-family="Arial, sans-serif" font-size="10" text-anchor="middle" fill="#999">
    本システムは道路ネットワーク上での資源回収ルートを最適化し、コストとエネルギー消費を最小化します
  </text>

</svg>